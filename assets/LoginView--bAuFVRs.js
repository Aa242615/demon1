/* empty css             */import{l as F}from"./users-C0Aas3PX.js";/* empty css                  */import{x as R,M as T,u as M,a2 as h,r as v,b as N,d as l,e as i,g as e,f as u,w as d,q as w,Y as y,F as x,s as b,K as k,t as L,i as S,ac as p,J as U,ad as z,ae as A,A as J,B as K,_ as Y}from"./index-B-NPC5fH.js";import"./axios-B4uVmeYG.js";const V=c=>(J("data-v-e0d20a63"),c=c(),K(),c),$={class:"out-container"},j={class:"container"},G=V(()=>e("h1",{class:"form-title"},"用户登录",-1)),H={class:"form-control"},O={class:"form-control"},P=V(()=>e("p",{class:"text"},[S("没有账户？点击"),e("a",{href:"http://localhost:5173/register"},"注册")],-1)),Q=R({__name:"LoginView",setup(c){const E=T(),q=M(),o=h({user:"admin",password:"123456"}),B=async()=>{var t;r.value=!0,await((t=_.value)==null?void 0:t.validate().catch(s=>{throw p.error("表单校验失败"),r.value=!1,s}));const n=await F(o).then(s=>{if(s.data.success=="false")throw p.error("登录信息有误"),r.value=!1,new Error(s.data.message);return s.data});console.log(n),E.saveToken(n.content),r.value=!1,p.success("登录成功"),q.push("/")},I=h({user:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:6,max:18}],password:[{required:!0,message:"密码不能为空",trigger:"blur"},{min:6,max:18}]}),r=v(!1),_=v(),f=n=>[...n].map((t,s)=>({char:t,delay:`${s*35}ms`}));return(n,t)=>{const s=U,g=z,C=N("RouterLink"),D=A;return l(),i("div",$,[e("div",j,[u(D,{rules:I,ref:_.value,model:o,"label-width":"auto"},{default:d(()=>[G,e("div",H,[w(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>o.user=a),type:"text",required:""},null,512),[[y,o.user]]),e("label",null,[(l(!0),i(x,null,b(f("账户"),(a,m)=>(l(),i("span",{key:m,style:k({transitionDelay:a.delay})},L(a.char),5))),128))])]),e("div",O,[w(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>o.password=a),type:"password",required:""},null,512),[[y,o.password]]),e("label",null,[(l(!0),i(x,null,b(f("密码"),(a,m)=>(l(),i("span",{key:m,style:k({transitionDelay:a.delay})},L(a.char),5))),128))])]),u(g,null,{default:d(()=>[u(s,{type:"primary",onClick:B,loading:r.value,class:"btn"},{default:d(()=>[S("登录")]),_:1},8,["loading"])]),_:1}),u(g,null,{default:d(()=>[P,u(C,{to:"/register"})]),_:1})]),_:1},8,["rules","model"])])])}}}),se=Y(Q,[["__scopeId","data-v-e0d20a63"]]);export{se as default};
